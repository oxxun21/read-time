(()=>{var e={};e.id=452,e.ids=[452],e.modules={38013:e=>{"use strict";e.exports=require("mongodb")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},17618:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>u,routeModule:()=>h,tree:()=>m});var i=r(73137),s=r(54647),a=r(4183),n=r.n(a),o=r(71775),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l=i.AppPageRouteModule,m=["",{children:["timecheck",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,60935)),"C:\\Users\\ogaeu\\OneDrive\\바탕 화면\\read-time\\src\\app\\timecheck\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(r.bind(r,51922))).default(e)],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,98955)),"C:\\Users\\ogaeu\\OneDrive\\바탕 화면\\read-time\\src\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,73588)),"C:\\Users\\ogaeu\\OneDrive\\바탕 화면\\read-time\\src\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[async e=>(await Promise.resolve().then(r.bind(r,51922))).default(e)],twitter:[],manifest:void 0}}],u=["C:\\Users\\ogaeu\\OneDrive\\바탕 화면\\read-time\\src\\app\\timecheck\\page.js"],d="/timecheck/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new l({definition:{kind:s.x.APP_PAGE,page:"/timecheck/page",pathname:"/timecheck",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}})},92951:(e,t,r)=>{Promise.resolve().then(r.bind(r,47920))},47920:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Calender});var i=r(60080),s=r(9885),a=r(70034),n=r(64731),o=r.n(n),c=r(50351),l=r.n(c);function Timeform({value:e,record:t,setRecord:r}){let a=(0,s.useRef)(),n=(0,s.useRef)(),[c,m]=(0,s.useState)(!1),fetchRecord=async(e,t,i)=>{try{let s=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!s.ok){alert("Time Record 기록 중 문제가 발생하였습니다.");let e=await s.json();throw Error(e.message)}let a=await s.json();r(a),alert(`${"POST"===t?"기록":"수정"} 완료!`)}catch(e){console.error(e)}finally{m(!1)}},handleSubmit=async r=>{r.preventDefault();let i=a.current.value,s=n.current.value,l=i.toString().padStart(2,"0"),u=s.toString().padStart(2,"0"),d=`${l}:${u}`;if("00"===l&&"00"===u){alert("시간을 입력해주세요!");return}c||(m(!0),t&&0!==t.length?fetchRecord("/api/timerecord/edit","PATCH",{_id:t[0]._id,time:d}):fetchRecord("/api/timerecord","POST",{date:o()(e).format("YYYY-MM-DD"),time:d}),a.current.value="",n.current.value="")},handleTimeDelete=async()=>{if(!c){m(!0);try{let e=await fetch("/api/timerecord/remove",{method:"DELETE",body:JSON.stringify({_id:t[0]._id})});if(!e.ok){alert("Time Record 삭제 중 문제가 발생하였습니다.");let t=await e.json();throw Error(t.message)}let i=await e.json();r(i),alert("삭제 완료!")}catch(e){console.error(e)}finally{m(!1)}}};return(0,i.jsxs)("section",{className:l().timeSection,children:[i.jsx("h2",{children:"오늘의 독서 시간 기록"}),(0,i.jsxs)("form",{onSubmit:handleSubmit,className:l().timeForm,children:[(0,i.jsxs)("p",{children:[o()(e).format("YYYY-MM-DD")," 기록"]}),i.jsx("p",{className:l().info,children:"캘린더를 눌러 수정과 삭제를 할 수 있어요."}),(0,i.jsxs)("div",{className:l().tiemInputDiv,children:[(0,i.jsxs)("div",{className:l().timeInput,children:[i.jsx("input",{type:"number",id:"hours",ref:a,min:"0",max:"23",placeholder:"0 ~ 23 입력"}),i.jsx("label",{htmlFor:"hours",children:"시간"})]}),(0,i.jsxs)("div",{className:l().timeInput,children:[i.jsx("input",{type:"number",id:"minutes",ref:n,min:"0",max:"59",placeholder:"0 ~ 59 입력"}),i.jsx("label",{htmlFor:"minutes",children:"분"})]})]}),(0,i.jsxs)("div",{className:l().timeBtnDiv,children:[t.length>=1&&i.jsx("button",{type:"button",onClick:handleTimeDelete,className:l().timeRemove,children:"삭제하기"}),i.jsx("button",{type:"submit",children:"저장하기"})]})]})]})}function Calender(){let e;let[t,r]=(0,s.useState)(new Date),[n,c]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let dataFetch=async()=>{try{let e=await fetch("/api/getrecord",{cache:"no-store"});if(!e.ok){alert("Time Record를 불러오던 중 문제가 발생하였습니다.");let t=await e.json();throw Error(t.message)}let t=await e.json();c(t)}catch(e){console.error(e)}};dataFetch()},[]),n&&(e=n.map(e=>e.date)),(0,i.jsxs)(i.Fragment,{children:[i.jsx("section",{children:i.jsx(a.ZP,{locale:"ko",onChange:r,value:t,next2Label:null,prev2Label:null,tileContent:({date:e})=>{let t=[];if(n){let r=o()(e).format("YYYY-MM-DD");for(let e of n)e.date===r&&t.push(i.jsx("p",{children:e.time},e._id))}return i.jsx("div",{children:t})},showNeighboringMonth:!1,formatDay:(e,t)=>o()(t).format("DD"),tileClassName:({date:r,view:i})=>{let s=o()(r).format("YYYY-MM-DD"),a=[];return n&&e.find(e=>e===s)&&a.push("highlight"),s===o()(t).format("YYYY-MM-DD")&&a.push("selected"),a.join(" ")}})}),i.jsx(Timeform,{value:t,record:n?n.filter(e=>e.date===o()(t).format("YYYY-MM-DD")):[],setRecord:c})]})}},50351:e=>{e.exports={timeSection:"timeform_timeSection__kxS4w",info:"timeform_info__xQjZK",timeForm:"timeform_timeForm__2hW9g",tiemInputDiv:"timeform_tiemInputDiv__uCjkv",timeInput:"timeform_timeInput__PSVgT",timeBtnDiv:"timeform_timeBtnDiv__lYNWS",timeRemove:"timeform_timeRemove__XMidZ"}},60935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>TimeCheck,metadata:()=>u});var i=r(48144);r(53830);var s=r(22325),a=r.n(s),n=r(17536);let o=(0,n.createProxy)(String.raw`C:\Users\ogaeu\OneDrive\바탕 화면\read-time\src\components\time\calender.js`),{__esModule:c,$$typeof:l}=o,m=o.default,u={title:"Read Time | TimeCheck",description:"오늘의 독서 시간을 남겨봐요."};async function TimeCheck(){return i.jsx("div",{className:`${a().contain} ${a().time}`,children:i.jsx(m,{})})}}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[395,506,522,127,533,319,11,884],()=>__webpack_exec__(17618));module.exports=r})();