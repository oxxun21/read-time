(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{511:function(e,t,n){Promise.resolve().then(n.bind(n,1346)),Promise.resolve().then(n.bind(n,5245)),Promise.resolve().then(n.t.bind(n,6003,23)),Promise.resolve().then(n.t.bind(n,3390,23)),Promise.resolve().then(n.t.bind(n,2977,23)),Promise.resolve().then(n.t.bind(n,6943,23))},2597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return r},unstable_getImgProps:function(){return unstable_getImgProps}});let o=n(1024),s=n(3655),a=n(7707),i=n(6964),l=o._(n(5324)),unstable_getImgProps=e=>{(0,a.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:t}=(0,s.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}},r=i.Image},1346:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return PostDeleteBtn}});var o=n(7437),s=n(2265),a=n(2977),i=n.n(a),l={src:"/_next/static/media/trash_icon.d5a0127f.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAuklEQVR42mOot7dmYchKZmQAgu+Kik4/FRQSGXzcmRmAIN/RloWBAQi+KSlZ/5aXXwXEV//Iy78G0puACrMYYOCdmqoMUHALEK8H4qVAfPiHoqIPuoLzvxXk5wLxbCD7zE9FhVi4gg+qKgpAwX2/FBQqgLgcyF4PVJCArmAvULIUiEuA7LVABfFwBe9VVeSAgjeAeCUQLwPi62DfgEFKHOM1PR1uoM763woKfUC6E0hP+qKspM3AwMAAAOtHUFZl5vwiAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},r=n(3875),c=n(6691),d=n.n(c),u=n(4033);function PostDeleteBtn(e){let{post:t}=e,[n,a]=(0,s.useState)(!1),[c,h]=(0,s.useState)(),[m,_]=(0,s.useState)(!1),p=(0,u.useRouter)(),openModal=e=>{h(e),a(e=>!e)},closeModal=()=>{a(!1)},handleDelete=async e=>{if(!m){_(!0);try{let t=await fetch("/api/postdelete/".concat(e),{method:"DELETE"});200===t.status?p.refresh():alert("Post 삭제 중 문제가 발생하였습니다.")}catch(e){console.error(e)}finally{_(!1)}a(!1)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{type:"button",onClick:()=>openModal(t._id),children:(0,o.jsx)(d(),{src:l,alt:"게시글 삭제",width:20,height:20})}),n&&(0,o.jsxs)(r.Z,{closeModal:closeModal,children:[(0,o.jsx)("p",{children:"게시글을 삭제하시겠습니까?"}),(0,o.jsxs)("div",{className:i().modalBtnDiv,children:[(0,o.jsx)("button",{type:"button",onClick:closeModal,children:"남겨둘래요"}),(0,o.jsx)("button",{type:"button",onClick:()=>handleDelete(c),children:"삭제할래요"})]})]})]})}},5245:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Search}});var o=n(7437),s=n(2265),a=n(7154),i=n.n(a),l=n(6691),r=n.n(l),c={src:"/_next/static/media/search_icon.546ba5ac.svg",height:24,width:24,blurWidth:0,blurHeight:0},d=n(7614),u=n.n(d),h=n(1396),m=n.n(h),_=n(2749),p=n(3875);function SearchView(e){let{searchResult:t}=e,[n,a]=(0,s.useState)(null),[i,l]=(0,s.useState)(!1),{data:r}=(0,_.useSession)(),closeModal=()=>{l(!1)},handleModal=()=>{l(e=>!e)},handleContentClick=e=>{n===e?a(null):a(e)};return(0,o.jsxs)("article",{className:u().searchViewContain,children:[t&&0!==t.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:"책 표지를 눌러 글을 남겨봐요."}),(0,o.jsx)("ul",{children:t.map((e,t)=>(0,o.jsxs)("li",{className:u().bookInfo,children:[(0,o.jsx)("strong",{children:e.title}),r?(0,o.jsx)(m(),{href:{pathname:"/post",query:{title:e.title,thumbnail:e.thumbnail}},children:(0,o.jsx)("img",{src:e.thumbnail,alt:e.title})}):(0,o.jsx)("img",{src:e.thumbnail,alt:e.title,onClick:handleModal}),(0,o.jsx)("p",{className:n===t?null:u().expanded,onClick:()=>handleContentClick(t),children:e.contents?"".concat(e.contents,"..."):"책 소개 없음"})]},e.isbn))})]}):(0,o.jsx)("p",{className:u().noBooks,children:"오늘 기억하고 싶은 문장은 무엇인가요?"}),i&&(0,o.jsxs)(p.Z,{closeModal:closeModal,children:[(0,o.jsx)("p",{children:"게시글 등록은 로그인 후에 이용하실 수 있습니다."}),(0,o.jsx)("button",{type:"button",onClick:closeModal,className:u().modalBtn,children:"닫기"})]})]})}function Search(){let[e,t]=(0,s.useState)(""),[n,a]=(0,s.useState)(null),handleSearch=async()=>{try{let t=await fetch("https://dapi.kakao.com/v3/search/book?query=".concat(e),{method:"GET",headers:{Authorization:" KakaoAK ".concat("3fc2626031204a6f20f2e802405d2e8c")},cache:"no-store"});t.ok||console.error("API 호출 실패:",t.status);let n=await t.json(),o=n.documents.filter(e=>e.thumbnail);a(o)}catch(e){console.error("API 호출 실패:",e)}finally{t("")}};return(0,o.jsxs)(_.SessionProvider,{children:[(0,o.jsxs)("form",{className:i().searchForm,onSubmit:e=>{e.preventDefault(),handleSearch()},children:[(0,o.jsx)("label",{htmlFor:"search",className:"a11y-hidden",children:"도서 검색"}),(0,o.jsx)("input",{type:"text",id:"search",placeholder:"기억에 남길 책을 검색해보세요",value:e,onChange:e=>t(e.target.value)}),(0,o.jsx)("button",{type:"submit",children:(0,o.jsx)(r(),{src:c,alt:"검색 버튼",width:35,height:35})})]}),(0,o.jsx)(SearchView,{searchResult:n})]})}},3875:function(e,t,n){"use strict";n.d(t,{Z:function(){return Modal}});var o=n(7437),s=n(2265),a=n(6585),i=n.n(a),l=n(4887);function Modal(e){let{children:t,closeModal:n}=e;return(0,s.useEffect)(()=>{let e=document.body;return e.style.cssText="\n      position: fixed;\n      top: -".concat(window.scrollY,"px;\n      overflow-y: scroll;\n      width: 100%;"),()=>{let t=e.style.top;e.style.cssText="",window.scrollTo(0,-1*parseInt(t||"0",10))}},[]),(0,l.createPortal)((0,o.jsx)("div",{onClick:n,className:i().modalBackground,children:(0,o.jsx)("div",{onClick:e=>e.stopPropagation(),className:i().modal,children:t})}),document.getElementById("portal"))}},6943:function(e){e.exports={postsSection:"postssection_postsSection__iPFze",loading:"postssection_loading__zgjYl"}},2977:function(e){e.exports={postViewList:"postview_postViewList__dUaYO",bookThumbnail:"postview_bookThumbnail__v98pI",modalBtnDiv:"postview_modalBtnDiv__K4_Mn",randomPostUser:"postview_randomPostUser__WLMDE",noPosts:"postview_noPosts__hT0To",loading:"postview_loading__mXt__"}},7154:function(e){e.exports={searchForm:"search_searchForm__15y1L"}},6003:function(e){e.exports={searchSection:"searchSection_searchSection__5FwcI"}},7614:function(e){e.exports={searchViewContain:"searchView_searchViewContain__QEHm1",bookInfo:"searchView_bookInfo__GSk_R",expanded:"searchView_expanded__4uOf9",modalBtn:"searchView_modalBtn__AVl4z",noBooks:"searchView_noBooks__PQZ_x"}},3390:function(e){e.exports={userArticle:"userInfo_userArticle__V7k7j"}},6585:function(e){e.exports={modalBackground:"modal_modalBackground___cg1r",modal:"modal_modal__CZ9gP"}},6691:function(e,t,n){e.exports=n(2597)},1396:function(e,t,n){e.exports=n(4724)},4033:function(e,t,n){e.exports=n(290)}},function(e){e.O(0,[759,971,864,744],function(){return e(e.s=511)}),_N_E=e.O()}]);